<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mowl - Die Zukunft des Gamings</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%230a0a1a'/><path d='M20 80V20 H35 L50 45 L65 20 H80 V80 H65 V40 L50 65 L35 40 V80 Z' fill='%234ade80'/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-green: 0 0 5px rgba(74, 222, 128, 0.8), 0 0 10px rgba(74, 222, 128, 0.6), 0 0 20px rgba(74, 222, 128, 0.4), 0 0 40px rgba(74, 222, 128, 0.2);
        }
        html { scroll-behavior: smooth; }
        body {
            background-color: #0a0a1a; color: #e0e0e0; font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background-image:
                radial-gradient(circle at 1% 1%, #1a1a3a 1px, transparent 2px),
                radial-gradient(circle at 99% 99%, #1a1a3a 1px, transparent 2px);
            background-size: 30px 30px;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .text-glow-green { text-shadow: var(--glow-green); }
        .btn-cyber {
            position: relative; border: 1px solid #4ade80; color: #4ade80;
            overflow: hidden; transition: all 0.3s ease;
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
        }
        .btn-cyber::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, #4ade80, transparent); transition: left 0.4s ease;
        }
        .btn-cyber:hover { color: #0a0a1a; background-color: #4ade80; box-shadow: var(--glow-green); }
        .btn-cyber:hover::before { left: 100%; }

        .card-link {
            display: block;
            height: 100%;
            transition: opacity 0.5s ease;
            position: relative;
        }
         .card-link:hover {
            z-index: 10;
        }
        .card-link .card { transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.5s ease; }
        .card-link:hover .card {
            transform: translateY(-10px);
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.4), 0 0 30px rgba(74, 222, 128, 0.2);
        }
        .card {
            background: rgba(15, 15, 35, 0.5); backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 222, 128, 0.2);
            position: relative; overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .card::before {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: conic-gradient(transparent, rgba(74, 222, 128, 0.2), transparent 30%);
            animation: rotate 6s linear infinite; opacity: 0; transition: opacity 0.4s ease;
            z-index: 0; 
        }
        .card-link:hover .card::before, .card:hover::before { opacity: 1; }
        .card > * { position: relative; z-index: 1; }

        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .section-header {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 10px 100%, 0 calc(100% - 10px));
            border-left: 2px solid #4ade80; border-bottom: 2px solid #4ade80;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 1s ease-out forwards; }
        .scroll-target { opacity: 0; }
        .collapsible-header { 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            position: relative;
            z-index: 5;
        }
        .arrow { transition: transform 0.3s ease; }
        .arrow.rotate-90 { transform: rotate(90deg); }
        .collapsible-content { transition: max-height 0.5s ease-out;}
        
        .platform-icon {
            position: absolute; top: 8px; left: 8px; z-index: 20;
            background: rgba(0,0,0,0.8); padding: 4px; border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .platform-icon svg { width: 20px; height: 20px; fill: white; }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-black/30 backdrop-blur-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold font-orbitron text-glow-green cursor-pointer">MOWL</a>
            <nav class="hidden md:flex space-x-8">
                <a href="#about" class="text-lg hover:text-green-400">Über Uns</a>
                <a href="#upcoming-games" class="text-lg hover:text-green-400">Ausstehende Spiele</a>
                <a href="#games" class="text-lg hover:text-green-400">Spiele</a>
                <a href="#played-games" class="text-lg hover:text-green-400">Bereits gespielt</a>
                <a href="#team" class="text-lg hover:text-green-400">Team</a>
                <a href="#contact" class="text-lg hover:text-green-400">Kontakt</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden p-2">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </div>
        <div id="mobile-menu" class="md:hidden hidden px-6 pb-4 space-y-2">
             <a href="#about" class="mobile-nav-link block text-lg">Über Uns</a>
             <a href="#upcoming-games" class="mobile-nav-link block text-lg">Ausstehende Spiele</a>
             <a href="#games" class="mobile-nav-link block text-lg">Spiele</a>
             <a href="#played-games" class="mobile-nav-link block text-lg">Bereits gespielt</a>
             <a href="#team" class="mobile-nav-link block text-lg">Team</a>
             <a href="#contact" class="mobile-nav-link block text-lg">Kontakt</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="min-h-screen flex items-center justify-center text-center overflow-hidden relative">
            <div id="hero-bg" class="absolute inset-0 z-[-1]"></div>
            <div class="container mx-auto px-6 z-10">
                <h2 class="text-5xl md:text-7xl lg:text-8xl font-orbitron font-black uppercase text-glow-green animate-pulse">Mowl</h2>
                <p class="mt-4 text-xl md:text-2xl lg:text-3xl font-semibold">Wir Definieren die <span class="text-pink-500">Zukunft</span> des Gamings.</p>
                <a href="#about" class="mt-12 inline-block btn-cyber text-xl font-bold py-3 px-8">ENTDECKE MEHR</a>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                      <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Über <span class="text-green-400">Mowl</span></h2>
                </div>
                <div class="max-w-4xl mx-auto text-center text-lg leading-relaxed">
                    <p>Mowl ist nicht nur ein Name – es ist eine Vision. Geboren aus Leidenschaft für immersive Welten und bahnbrechende Technologien, schmieden wir die nächste Generation interaktiver Unterhaltung. Wir verschieben Grenzen, brechen Regeln und erschaffen Erlebnisse, die dich nicht mehr loslassen. Willkommen in unserer Realität.</p>
                </div>
            </div>
        </section>
        
        <!-- Upcoming Games Section -->
        <section id="upcoming-games" class="py-20 bg-black/20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Ausstehende <span class="text-green-400">Spiele</span></h2>
                </div>
                <div class="space-y-16">
                    <div>
                        <h3 class="collapsible-header text-3xl font-orbitron font-semibold mb-8 text-green-300 border-b-2 border-green-500/30 pb-2">Coop <span class="arrow text-2xl">&#9654;</span></h3>
                        <div class="collapsible-content">
                            <div id="upcoming-coop-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                            <div class="text-center mt-8"><button id="load-more-upcoming-coop" class="btn-cyber py-2 px-6 hidden">Mehr laden</button></div>
                            <p id="no-upcoming-coop-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Coop-Spiele angekündigt.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="collapsible-header text-3xl font-orbitron font-semibold mb-8 text-green-300 border-b-2 border-green-500/30 pb-2">Singleplayer <span class="arrow text-2xl">&#9654;</span></h3>
                         <div class="collapsible-content">
                            <div id="upcoming-singleplayer-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                            <div class="text-center mt-8"><button id="load-more-upcoming-singleplayer" class="btn-cyber py-2 px-6 hidden">Mehr laden</button></div>
                            <p id="no-upcoming-singleplayer-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Singleplayer-Spiele angekündigt.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Games Section -->
        <section id="games" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Aktuelle <span class="text-green-400">Spiele</span></h2>
                </div>
                <div id="released-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <p id="no-released-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Spiele veröffentlicht.</p>
            </div>
        </section>

        <!-- Played Games Section -->
        <section id="played-games" class="py-20 bg-black/20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Bereits <span class="text-green-400">Gespielt</span></h2>
                </div>
                <div id="played-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <p id="no-played-games" class="text-gray-500 mt-8 text-center hidden">Noch keine Spiele als gespielt markiert.</p>
            </div>
        </section>
        
        <!-- Team Section -->
        <section id="team" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Das <span class="text-green-400">Kernteam</span></h2>
                </div>
                <div class="flex flex-wrap justify-center gap-8">
                    <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 text-center">
                        <div class="card p-4 rounded-lg">
                           <img src="https://i.imgur.com/gp7b4xC.png" alt="Teammitglied Mike" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-green-400 object-cover bg-black">
                            <h3 class="text-xl font-bold font-orbitron text-green-300">Mike</h3>
                        </div>
                    </div>
                    <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 text-center">
                        <div class="card p-4 rounded-lg">
                           <img src="https://i.imgur.com/uHeQIla.png" alt="Teammitglied Powl" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-yellow-400 object-cover">
                            <h3 class="text-xl font-bold font-orbitron text-yellow-300">Powl</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-black/40 py-12 border-t border-green-500/20">
        <div class="container mx-auto px-6 text-center">
            <h3 class="text-3xl font-orbitron font-bold mb-4">Kontakt aufnehmen</h3>
            <p class="max-w-md mx-auto mb-8">Hast du eine Frage oder möchtest mit uns zusammenarbeiten? Wir freuen uns, von dir zu hören.</p>
            <a href="mailto:kontakt@mowl.dev" class="text-lg font-semibold text-green-400 hover:text-glow-green">mowlgaming.dev@gmail.com</a>
            <p class="mt-10 text-sm text-gray-500">&copy; 2025 Mowl. Alle Rechte vorbehalten.
                <a href="admin.html" class="cursor-pointer ml-4" title="Admin Login">&#128272;</a>
            </p>
        </div>
    </footer>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
       
        const firebaseConfig = {
            apiKey: "AIzaSyB8nVhql9M0IkbyQbmF7AVGvk4mKMObg0A",
            authDomain: "mowl-website.firebaseapp.com",
            projectId: "mowl-website",
            storageBucket: "mowl-website.appspot.com",
            messagingSenderId: "181578753317",
            appId: "1:181578753317:web:f44567dd561d8e7a37a6cc",
            measurementId: "G-9F6YC5NLCS"
        };
      
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const gamesCollection = query(collection(db, "upcoming-games"), orderBy("createdAt", "desc"));

        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.scroll-target').forEach(el => observer.observe(el));

            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const arrow = header.querySelector('.arrow');
                    content.classList.toggle('hidden');
                    arrow.classList.toggle('rotate-90');
                });
            });

            const upcomingGrids = {
                coop: document.getElementById('upcoming-coop-games-grid'),
                singleplayer: document.getElementById('upcoming-singleplayer-games-grid'),
            };
            const upcomingNoGamesMsgs = {
                coop: document.getElementById('no-upcoming-coop-games'),
                singleplayer: document.getElementById('no-upcoming-singleplayer-games'),
            };
            const upcomingLoadMoreButtons = {
                coop: document.getElementById('load-more-upcoming-coop'),
                singleplayer: document.getElementById('load-more-upcoming-singleplayer'),
            };
            
            const releasedGamesGrid = document.getElementById('released-games-grid');
            const noReleasedGamesMsg = document.getElementById('no-released-games');
            const playedGamesGrid = document.getElementById('played-games-grid');
            const noPlayedGamesMsg = document.getElementById('no-played-games');
            
            function createGameCard(gameData, gameId, isClickable = false, isHidden = false) {
                 const hiddenClass = isHidden ? 'hidden' : '';
                 
                 const ratingHTML = (gameData.rating != null && gameData.status !== 'upcoming')
                    ? `<div class="absolute top-2 right-2 bg-black/80 text-white font-bold text-lg rounded-md px-3 py-1 flex items-center space-x-1 border border-yellow-400/50 z-10">
                           <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>
                           <span>${Number(gameData.rating).toFixed(1)}</span>
                       </div>`
                    : '';
                
                 const costHTML = gameData.tags?.includes('not_free')
                    ? `<div class="absolute top-2 left-2 bg-black/80 text-green-400 font-bold text-lg rounded-full w-8 h-8 flex items-center justify-center border border-green-400/50 z-10">$</div>`
                    : '';

                 // Logic for upcoming vs released games
                 let linkUrl = `game.html?id=${gameId}`;
                 let linkText = "Details & Clips &rarr;";
                 let targetAttr = "";

                 if (gameData.status === 'upcoming') {
                    const originalUrl = gameData.url || '';
                    // Extract Steam App ID to create a steam:// link
                    const steamMatch = originalUrl.match(/\/app\/(\d+)/);
                    
                    if (steamMatch && steamMatch[1]) {
                        linkUrl = `steam://store/${steamMatch[1]}`;
                        linkText = "In Steam App öffnen &rarr;";
                    } else {
                        linkUrl = originalUrl;
                        linkText = "Zum Store &rarr;";
                        targetAttr = 'target="_blank" rel="noopener noreferrer"';
                    }
                 }

                 const cardContent = `
                    <div class="card p-6 rounded-lg text-center">
                        ${ratingHTML}
                        ${costHTML}
                        <img src="${gameData.image || 'https://placehold.co/600x400/0a0a1a/ffffff?text=Bild+fehlt'}" alt="${gameData.title} Spielcover" class="w-full h-48 object-cover rounded mb-4 border-2 border-green-500/50">
                        <div class="flex flex-col flex-grow justify-between">
                             <div>
                                <h3 class="text-2xl font-orbitron font-bold mb-2 text-green-300">${gameData.title || 'Spiel wird geladen...'}</h3>
                                <p class="text-gray-400 mb-4 h-24 overflow-hidden text-ellipsis">${gameData.description || ''}</p>
                             </div>
                             <span class="font-semibold text-green-400 hover:text-white transition-colors mt-auto cursor-default select-none">${linkText}</span>
                        </div>
                    </div>
                `;

                const wrapperClass = `card-link block h-full ${hiddenClass}`;
                return `<a href="${linkUrl}" ${targetAttr} class="${wrapperClass}">${cardContent}</a>`;
            }

            onSnapshot(gamesCollection, (snapshot) => {
                displayGames(snapshot.docs);
            });
            
            function displayGames(docs) {
                const upcomingDocs = { coop: [], singleplayer: [] };
                let releasedDocs = [];
                let playedDocs = [];
                
                docs.forEach(doc => {
                    const data = doc.data();
                    data.id = doc.id;
                    const tags = data.tags || [];

                    if (data.status === 'played') playedDocs.push(data);
                    else if (data.status === 'released') releasedDocs.push(data);
                    else { 
                        if (tags.includes('coop')) upcomingDocs.coop.push(data);
                        if (tags.includes('singleplayer')) upcomingDocs.singleplayer.push(data);
                    }
                });
                
                renderCategorizedGames(upcomingGrids, upcomingNoGamesMsgs, upcomingLoadMoreButtons, upcomingDocs);
                renderSimpleGameList(releasedGamesGrid, noReleasedGamesMsg, releasedDocs, true);
                renderSimpleGameList(playedGamesGrid, noPlayedGamesMsg, playedDocs, true);
            }

            function renderCategorizedGames(grids, noGamesMsgs, loadMoreButtons, categorizedDocs) {
                 for (const category in categorizedDocs) {
                    const grid = grids[category];
                    const noGamesMsg = noGamesMsgs[category];
                    const loadMoreBtn = loadMoreButtons[category];
                    const docsForCategory = categorizedDocs[category];
                    
                    grid.innerHTML = ''; noGamesMsg.classList.add('hidden'); loadMoreBtn.classList.add('hidden');

                    if (docsForCategory.length === 0) {
                        noGamesMsg.classList.remove('hidden'); continue;
                    }
                    
                    let gridHtml = '';
                    docsForCategory.forEach((gameData, index) => {
                        gridHtml += createGameCard(gameData, gameData.id, true, index >= 3);
                    });
                    grid.innerHTML = gridHtml;

                    if (docsForCategory.length > 3) {
                        loadMoreBtn.classList.remove('hidden');
                        
                        // Clean up old listeners by cloning
                        const newBtn = loadMoreBtn.cloneNode(true);
                        loadMoreBtn.parentNode.replaceChild(newBtn, loadMoreBtn);
                        
                        // Toggle Logic
                        let isExpanded = false;
                        newBtn.textContent = "Mehr laden";

                        newBtn.addEventListener('click', () => {
                            isExpanded = !isExpanded;
                            const hiddenCards = grid.querySelectorAll('.card-link');
                            
                            if (isExpanded) {
                                hiddenCards.forEach(card => card.classList.remove('hidden'));
                                newBtn.textContent = "Weniger anzeigen";
                            } else {
                                // Hide all except first 3
                                hiddenCards.forEach((card, index) => {
                                    if (index >= 3) card.classList.add('hidden');
                                });
                                newBtn.textContent = "Mehr laden";
                                // Optional: scroll back up to grid top so user isn't lost
                                grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            }
                        });
                    }
                }
            }

            function renderSimpleGameList(grid, noGamesMsg, docs, isClickable) {
                noGamesMsg.classList.add('hidden'); grid.innerHTML = '';
                if (docs.length === 0) {
                    noGamesMsg.classList.remove('hidden'); return;
                }
                
                let gridHtml = '';
                docs.forEach(gameData => {
                    gridHtml += createGameCard(gameData, gameData.id, isClickable, false);
                });
                grid.innerHTML = gridHtml;
            }
        });
    </script>
</body>
</html>
