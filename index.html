<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mowl - Die Zukunft des Gamings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-green: 0 0 5px rgba(74, 222, 128, 0.8), 0 0 10px rgba(74, 222, 128, 0.6), 0 0 20px rgba(74, 222, 128, 0.4), 0 0 40px rgba(74, 222, 128, 0.2);
            --glow-magenta: 0 0 5px rgba(255, 0, 255, 0.8), 0 0 10px rgba(255, 0, 255, 0.6), 0 0 20px rgba(255, 0, 255, 0.4), 0 0 40px rgba(255, 0, 255, 0.2);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: #0a0a1a;
            color: #e0e0e0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background-image:
                radial-gradient(circle at 1% 1%, #1a1a3a 1px, transparent 2px),
                radial-gradient(circle at 99% 99%, #1a1a3a 1px, transparent 2px);
            background-size: 30px 30px;
        }

        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }

        .text-glow-green {
            text-shadow: var(--glow-green);
        }

        .text-glow-magenta {
            text-shadow: var(--glow-magenta);
        }
        
        .border-glow-green {
            box-shadow: 0 0 8px rgba(74, 222, 128, 0.6);
        }

        .btn-cyber {
            position: relative;
            border: 1px solid #4ade80; /* green-400 */
            color: #4ade80; /* green-400 */
            overflow: hidden;
            transition: all 0.3s ease;
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
        }

        .btn-cyber::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, #4ade80, transparent);
            transition: left 0.4s ease;
        }

        .btn-cyber:hover, .btn-cyber:disabled {
            color: #0a0a1a;
            background-color: #4ade80; /* green-400 */
            box-shadow: var(--glow-green);
        }
        
        .btn-cyber:disabled {
             opacity: 0.5;
             cursor: not-allowed;
        }

        .btn-cyber:hover::before {
            left: 100%;
        }

        .card {
            background: rgba(15, 15, 35, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 222, 128, 0.2);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.4), 0 0 30px rgba(74, 222, 128, 0.2);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, rgba(74, 222, 128, 0.2), transparent 30%);
            animation: rotate 6s linear infinite;
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: -1; 
        }
        
        .card:hover::before {
            opacity: 1;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .section-header {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 10px 100%, 0 calc(100% - 10px));
            border-left: 2px solid #4ade80; /* green-400 */
            border-bottom: 2px solid #4ade80; /* green-400 */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 1s ease-out forwards;
        }
        
        .scroll-target {
            opacity: 0;
        }
        
        .collapsible-content {
            max-height: 2000px; /* Adjust if you expect very long lists */
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, margin-bottom 0.5s ease-in-out;
        }
        .collapsible-content.collapsed {
            max-height: 0;
            margin-bottom: 0 !important;
        }
        .collapsible-header svg.collapsed {
            transform: rotate(-90deg);
        }

    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-black/30 backdrop-blur-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold font-orbitron text-glow-green cursor-pointer">MOWL</a>
            <nav class="hidden md:flex space-x-8">
                <a href="#about" class="text-lg hover:text-green-400 transition-colors duration-300">Über Uns</a>
                <a href="#upcoming-games" class="text-lg hover:text-green-400 transition-colors duration-300">Ausstehende Spiele</a>
                <a href="#games" class="text-lg hover:text-green-400 transition-colors duration-300">Spiele</a>
                <a href="#team" class="text-lg hover:text-green-400 transition-colors duration-300">Team</a>
                <a href="#contact" class="text-lg hover:text-green-400 transition-colors duration-300">Kontakt</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-200 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden px-6 pb-4 space-y-2">
             <a href="#about" class="block text-lg hover:text-green-400 transition-colors duration-300">Über Uns</a>
             <a href="#upcoming-games" class="block text-lg hover:text-green-400 transition-colors duration-300">Ausstehende Spiele</a>
             <a href="#games" class="block text-lg hover:text-green-400 transition-colors duration-300">Spiele</a>
             <a href="#team" class="block text-lg hover:text-green-400 transition-colors duration-300">Team</a>
             <a href="#contact" class="block text-lg hover:text-green-400 transition-colors duration-300">Kontakt</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="min-h-screen flex items-center justify-center text-center overflow-hidden relative">
            <div class="absolute inset-0 bg-black opacity-50 z-0"></div>
            <div id="hero-bg" class="absolute inset-0 z-[-1]"></div>

            <div class="container mx-auto px-6 z-10">
                <h2 class="text-5xl md:text-7xl lg:text-8xl font-orbitron font-black uppercase text-glow-green animate-pulse">
                    Mowl
                </h2>
                <p class="mt-4 text-xl md:text-2xl lg:text-3xl font-semibold">
                    Wir Definieren die <span class="text-magenta-500 text-glow-magenta">Zukunft</span> des Gamings.
                </p>
                <a href="#about" class="mt-12 inline-block btn-cyber text-xl font-bold py-3 px-8">
                    ENTDECKE MEHR
                </a>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                     <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Über <span class="text-green-400">Mowl</span></h2>
                </div>
                <div class="max-w-4xl mx-auto text-center text-lg leading-relaxed">
                    <p>
                        Mowl ist nicht nur ein Name – es ist eine Vision. Geboren aus Leidenschaft für immersive Welten und bahnbrechende Technologien, schmieden wir die nächste Generation interaktiver Unterhaltung. Wir verschieben Grenzen, brechen Regeln und erschaffen Erlebnisse, die dich nicht mehr loslassen. Willkommen in unserer Realität.
                    </p>
                </div>
            </div>
        </section>
        
        <!-- Upcoming Games Section -->
        <section id="upcoming-games" class="py-20 bg-black/20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Ausstehende <span class="text-green-400">Spiele</span></h2>
                </div>
                
                <div class="collapsible-category mb-16">
                    <h3 class="collapsible-header flex justify-between items-center cursor-pointer text-3xl font-orbitron font-semibold text-green-300 border-b-2 border-green-500/30 pb-2">
                        <span>Coop</span>
                        <svg class="w-8 h-8 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </h3>
                    <div class="collapsible-content mt-8">
                        <div id="upcoming-coop-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                        <p id="no-upcoming-coop-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Coop-Spiele angekündigt.</p>
                    </div>
                </div>

                <div class="collapsible-category mb-16">
                    <h3 class="collapsible-header flex justify-between items-center cursor-pointer text-3xl font-orbitron font-semibold text-green-300 border-b-2 border-green-500/30 pb-2">
                       <span>Singleplayer</span>
                       <svg class="w-8 h-8 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </h3>
                    <div class="collapsible-content mt-8">
                        <div id="upcoming-singleplayer-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                        <p id="no-upcoming-singleplayer-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Singleplayer-Spiele angekündigt.</p>
                    </div>
                </div>

                <div class="collapsible-category">
                    <h3 class="collapsible-header flex justify-between items-center cursor-pointer text-3xl font-orbitron font-semibold text-green-300 border-b-2 border-green-500/30 pb-2">
                        <span>Not Free</span>
                        <svg class="w-8 h-8 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </h3>
                    <div class="collapsible-content mt-8">
                        <div id="upcoming-not-free-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                        <p id="no-upcoming-not-free-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine kostenpflichtigen Spiele angekündigt.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Games Section -->
        <section id="games" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Aktuelle <span class="text-green-400">Spiele</span></h2>
                </div>
                
                <div id="released-games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <p id="no-released-games" class="text-gray-500 mt-8 text-center hidden">Momentan sind keine Spiele veröffentlicht.</p>
            </div>
        </section>
        
        <!-- Team Section -->
        <section id="team" class="py-20 scroll-target">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="inline-block text-4xl font-orbitron font-bold uppercase mb-4 section-header pl-4 pr-8 py-2">Das <span class="text-green-400">Kernteam</span></h2>
                </div>
                <div class="flex flex-wrap justify-center gap-8">
                    <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 text-center">
                        <div class="card p-4 rounded-lg">
                           <img src="https://i.imgur.com/fTC32Td.png" alt="Teammitglied Mike" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-green-400 object-cover bg-black">
                            <h3 class="text-xl font-bold font-orbitron text-green-300">Mike</h3>
                            <p class="text-gray-400">Community Manager</p>
                        </div>
                    </div>
                    <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 text-center">
                        <div class="card p-4 rounded-lg">
                           <img src="https://i.imgur.com/uHeQIla.png" alt="Teammitglied Powl" class="w-32 h-32 rounded-full mx-auto mb-4 border-2 border-yellow-400 object-cover">
                            <h3 class="text-xl font-bold font-orbitron text-yellow-300">Powl</h3>
                            <p class="text-gray-400">Chief Morale Officer</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-black/40 py-12 border-t border-green-500/20">
        <div class="container mx-auto px-6 text-center">
            <h3 class="text-3xl font-orbitron font-bold mb-4">Kontakt aufnehmen</h3>
            <p class="max-w-md mx-auto mb-8">
                Hast du eine Frage oder möchtest mit uns zusammenarbeiten? Wir freuen uns, von dir zu hören.
            </p>
            <a href="mailto:kontakt@mowl.dev" class="text-lg font-semibold text-green-400 hover:text-glow-green transition-all">mowlgaming.dev@gmail.com</a>
            
            <div class="flex justify-center space-x-6 mt-8">
                 <!-- Social Links Here -->
            </div>
            
            <p class="mt-10 text-sm text-gray-500">&copy; 2025 Mowl. Alle Rechte vorbehalten.
                <a href="admin.html" class="cursor-pointer ml-4" title="Admin Login">&#128272;</a>
            </p>
        </div>
    </footer>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
      
        const firebaseConfig = {
            apiKey: "AIzaSyB8nVhql9M0IkbyQbmF7AVGvk4mKMObg0A",
            authDomain: "mowl-website.firebaseapp.com",
            projectId: "mowl-website",
            storageBucket: "mowl-website.firebasestorage.app",
            messagingSenderId: "181578753317",
            appId: "1:181578753317:web:f44567dd561d8e7a37a6cc",
            measurementId: "G-9F6YC5NLCS"
        };
      
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const gamesCollection = collection(db, "upcoming-games");

        document.addEventListener('DOMContentLoaded', () => {

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                     if (this.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        document.querySelector(this.getAttribute('href')).scrollIntoView({
                            behavior: 'smooth'
                        });
                        if (!mobileMenu.classList.contains('hidden')) {
                             mobileMenu.classList.add('hidden');
                        }
                     }
                });
            });


            const heroBg = document.getElementById('hero-bg');
            if (heroBg) {
                let lines = [];
                const lineCount = 50;
                function createLine() {
                    const line = document.createElement('div');
                    line.style.position = 'absolute';
                    line.style.height = '1px';
                    line.style.background = `rgba(74, 222, 128, ${Math.random() * 0.3 + 0.1})`;
                    line.style.width = `${Math.random() * 100 + 50}px`;
                    line.style.top = `${Math.random() * 100}%`;
                    line.style.left = `${Math.random() * 100}%`;
                    line.style.animation = `moveLine ${Math.random() * 20 + 10}s linear infinite`;
                    heroBg.appendChild(line);
                    return line;
                }
                for (let i = 0; i < lineCount; i++) lines.push(createLine());
                const style = document.createElement('style');
                style.innerHTML = `@keyframes moveLine { from { transform: translateX(-200px); } to { transform: translateX(${window.innerWidth}px); } }`;
                document.head.appendChild(style);
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.scroll-target').forEach(el => observer.observe(el));

            const upcomingGrids = {
                coop: document.getElementById('upcoming-coop-games-grid'),
                singleplayer: document.getElementById('upcoming-singleplayer-games-grid'),
                not_free: document.getElementById('upcoming-not-free-games-grid')
            };
            const upcomingNoGamesMsgs = {
                coop: document.getElementById('no-upcoming-coop-games'),
                singleplayer: document.getElementById('no-upcoming-singleplayer-games'),
                not_free: document.getElementById('no-upcoming-not-free-games')
            };
            
            const releasedGamesGrid = document.getElementById('released-games-grid');
            const noReleasedGamesMsg = document.getElementById('no-released-games');


            const fetchedDataCache = new Map();
            async function fetchSteamGameData(steamUrl) {
                if (fetchedDataCache.has(steamUrl)) {
                    return fetchedDataCache.get(steamUrl);
                }
                const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(steamUrl)}`;
                try {
                    const response = await fetch(proxyUrl);
                    if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
                    const htmlText = await response.text();
                    const doc = new DOMParser().parseFromString(htmlText, 'text/html');
                    const data = {
                         title: doc.querySelector('meta[property="og:title"]')?.content.replace('on Steam', '').trim() || 'Unbekannter Titel',
                         description: doc.querySelector('meta[property="og:description"]')?.content || 'Keine Beschreibung verfügbar.',
                         image: doc.querySelector('meta[property="og:image"]')?.content || 'https://placehold.co/600x400/0a0a1a/ffffff?text=Bild+fehlt',
                         url: steamUrl
                    };
                    fetchedDataCache.set(steamUrl, data);
                    return data;
                } catch (error) {
                    console.error(`Failed to fetch Steam game data for ${steamUrl}:`, error);
                    return null;
                }
            }

            function createGameCard(game) {
                 const steamWebUrl = game.url;
                 const appId = steamWebUrl.split('/')[4];
                 const steamAppUrl = `steam://store/${appId}`;

                 return `
                    <div class="card p-6 rounded-lg text-center" data-url="${steamWebUrl}">
                        <img src="${game.image}" alt="${game.title} Spielcover" class="w-full h-48 object-cover rounded mb-4 border-2 border-green-500/50">
                        <h3 class="text-2xl font-orbitron font-bold mb-2 text-green-300">${game.title}</h3>
                        <p class="text-gray-400 mb-4 h-24 overflow-hidden text-ellipsis">${game.description}</p>
                        <a href="${steamAppUrl}" title="Öffnet ${game.title} direkt in der Steam App" class="font-semibold text-green-400 hover:text-white transition-colors">In Steam öffnen &rarr;</a>
                    </div>
                `;
            }

            onSnapshot(gamesCollection, (snapshot) => {
                displayGames(snapshot.docs);
            });
            
            async function displayGames(docs) {
                Object.values(upcomingGrids).forEach(grid => grid.innerHTML = '');
                Object.values(upcomingNoGamesMsgs).forEach(msg => msg.classList.add('hidden'));

                const upcomingDocs = { coop: [], singleplayer: [], not_free: [] };
                const releasedDocs = [];
                
                docs.forEach(doc => {
                    const data = doc.data();
                    const tags = data.tags || [];
                    if (data.status === 'released') {
                        releasedDocs.push(data);
                    } else {
                        if (tags.includes('coop')) upcomingDocs.coop.push(data);
                        if (tags.includes('singleplayer')) upcomingDocs.singleplayer.push(data);
                        if (tags.includes('not_free')) upcomingDocs.not_free.push(data);
                    }
                });
                
                await renderCategorizedGames(upcomingGrids, upcomingNoGamesMsgs, upcomingDocs);
                await renderSimpleGameList(releasedGamesGrid, noReleasedGamesMsg, releasedDocs);
            }

            async function renderCategorizedGames(grids, noGamesMsgs, categorizedDocs) {
                 for (const category in categorizedDocs) {
                    const grid = grids[category];
                    const noGamesMsg = noGamesMsgs[category];
                    const docsForCategory = categorizedDocs[category];

                    if (docsForCategory.length === 0) {
                        noGamesMsg.classList.remove('hidden');
                        continue;
                    }
                    
                    const fetchPromises = docsForCategory.map(doc => fetchSteamGameData(doc.url).catch(e => null));
                    const gameDataArray = await Promise.all(fetchPromises);
                    
                    grid.innerHTML = '';
                    gameDataArray.forEach(gameData => {
                        if (gameData) {
                            grid.innerHTML += createGameCard(gameData);
                        }
                    });
                }
            }

            async function renderSimpleGameList(grid, noGamesMsg, docs) {
                if (docs.length === 0) {
                    noGamesMsg.classList.remove('hidden');
                    grid.innerHTML = '';
                    return;
                }

                noGamesMsg.classList.add('hidden');
                
                const uniqueDocs = Array.from(new Map(docs.map(doc => [doc.url, doc])).values());
                const fetchPromises = uniqueDocs.map(doc => fetchSteamGameData(doc.url).catch(e => null));
                const gameDataArray = await Promise.all(fetchPromises);
                
                grid.innerHTML = '';
                gameDataArray.forEach(gameData => {
                    if (gameData) {
                        grid.innerHTML += createGameCard(gameData);
                    }
                });
            }

            // Collapsible categories
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('svg');

                    content.classList.toggle('collapsed');
                    icon.classList.toggle('collapsed');
                });
            });
        });
    </script>
</body>
</html>
